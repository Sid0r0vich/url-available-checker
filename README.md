# URL available checker

## Структура

Я создал стандартную структуру golang проекта https://github.com/golang-standards/project-layout. Разделил код на пакеты, чтобы было удобно ориентироваться

## Библиотеки

Работал со стандартным net/http, хотя знаю ещё gin и несколько других роутеров

## Запрос со ссылками (/links)

Каждый запрос я выполняю в отдельной горутине, чтобы один долгий запрос не блокировал работу программы. Результаты собираю в слайс в другой горутине

## Запрос с формированием PDF (/pdf)

Изначально я хотел объединять все URL в одну мапу, чтобы была уникальность. Но потом решил, что нужно оставить дубликаты: сначала URL работает, потом не работает, нужно оставить историю

## Остановка сервера

Сначала я пробовал написать своё решение через контекст, но оказалось, что есть стандартный метод Shutdown, который сам дожидается, пока все хендлеры завершатся. Туда я передал контекст с таймаутом на случай, если будут хендлеры, которые долго не завершаются. Отмена срабатывает при получении сигнала SIGTERM (нажатие Ctrl + C), обработка идёт в отдельной горутине. Её я дожидаться не стал, потому что она имеет смысл только пока работает сервер

## Хранение данных

Так как в задании не рекомендовалось использование БД, я создал просто мапу, которая хранит результаты запросов. Туда я добавил мьютекс, чтобы не происходило гонки при параллельных запросах. Чтобы можно было быстро прикрутить БД, я использовал интерфейс репозитория

## Тесты

Я написал smoke тесты для первого запроса. Тут я использовал паттерн со слайсом тестов
